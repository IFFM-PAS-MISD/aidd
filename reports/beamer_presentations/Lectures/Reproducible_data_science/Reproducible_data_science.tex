%\documentclass[10pt]{beamer} % aspect ratio 4:3, 128 mm by 96 mm
%\documentclass[10pt,aspectratio=169]{beamer} % aspect ratio 16:9, only frames
\documentclass[10pt,aspectratio=169,notes]{beamer} % aspect ratio 16:9, frames+notes 
%\documentclass[10pt,aspectratio=169,notes=only]{beamer} % aspect ratio 16:9, notes only 
\usepackage{pgfpages}
%\setbeameroption{show notes}
%\setbeameroption{show notes on second screen=right}
%\setbeameroption{show notes on second screen=bottom} % does not work for animations

%\graphicspath{{../../figures/}}
\graphicspath{{figs/}}
%\includeonlyframes{frame1,frame2,frame3}
%\includeonlyframes{frame10}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Packages
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{appendixnumberbeamer}
\usepackage{booktabs}
\usepackage{csvsimple} % for csv read
\usepackage[scale=2]{ccicons}
\usepackage{pgfplots}
\usepackage{xspace}
%\usepackage{amscls} % amsthm.sty
\usepackage{amsmath}
\usepackage{totcount}
\usepackage{tikz}
\usepackage{bm}
%\usepackage{FiraSans}
\usepackage{mathrsfs} % for Fourier and Laplace symbols % installed manually jknappen in miktex console
\usepackage{verbatim}
%\usepackage{eulervm} % alternative math fonts
%\usepackage{comment}
\usetikzlibrary{external} % speedup compilation
%\tikzexternalize % activate!
%\usetikzlibrary{shapes,arrows}  
% the animations are only supported by some pdf readers (AcrobatReader, PDF-XChange, acroread, and Foxit Reader)
% install manually media9 from miktex console (it contains pdfbase.sty), ocgx2 (ocgbase.sty)
\usepackage{animate}
\usepackage{ifthen}
\newcounter{angle}
\setcounter{angle}{0}
%\usepackage{bibentry}
%\nobibliography*
\usepackage{caption}%
\captionsetup[figure]{labelformat=empty}%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Metropolis theme custom modification file
\input{metropolis_mods.tex}
%\usefonttheme[onlymath]{Serif} 
\hypersetup{colorlinks,linkcolor=,urlcolor=logoblue}
\usepackage[edges]{forest}% for folder structures
\usepackage[normalem]{ulem} % for strikeout
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Custom commands
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% matrix command 
%\newcommand{\matr}[1]{\mathbf{#1}} % bold upright (Elsevier, Springer)
%  metropolis compatible (FiraSans auto replacement)
\newcommand{\matr}[1]{\boldsymbol{#1}}
%\newcommand{\matr}[1]{#1}          % pure math version
%\newcommand{\matr}[1]{\bm{#1}}     % ISO complying version
% vector command 
%\newcommand{\vect}[1]{\mathbf{#1}} % bold upright (Elsevier, Springer)
% metropolis compatible (FiraSans auto replacement)
\newcommand{\vect}[1]{\boldsymbol{#1}}
% bold symbol
\newcommand{\bs}[1]{\boldsymbol{#1}}
% derivative upright command
\DeclareRobustCommand*{\drv}{\mathop{}\!\mathrm{d}}
\newcommand{\ud}{\mathrm{d}}
\newcommand{\myexp}{\mathrm{e}}
% 
\newcommand{\themename}{\textbf{\textsc{metropolis}}\xspace}
\renewcommand{\Re}{\operatorname{\mathbb{R}e}}
\renewcommand{\Im}{\operatorname{\mathbb{I}m}}
% folder
\definecolor{folderbg}{RGB}{124,166,198}
\definecolor{folderborder}{RGB}{110,144,169}
\newlength\Size
\setlength\Size{4pt}
\tikzset{%
	folder/.pic={%
		\filldraw [draw=folderborder, top color=folderbg!50, bottom color=folderbg] (-1.05*\Size,0.2\Size+5pt) rectangle ++(.75*\Size,-0.2\Size-5pt);
		\filldraw [draw=folderborder, top color=folderbg!50, bottom color=folderbg] (-1.15*\Size,-\Size) rectangle (1.15*\Size,\Size);
	},
	file/.pic={%
		\filldraw [draw=folderborder, top color=folderbg!5, bottom color=folderbg!10] (-\Size,.4*\Size+5pt) coordinate (a) |- (\Size,-1.2*\Size) coordinate (b) -- ++(0,1.6*\Size) coordinate (c) -- ++(-5pt,5pt) coordinate (d) -- cycle (d) |- (c) ;
	},
}
\forestset{%
	declare autowrapped toks={pic me}{},
	pic dir tree/.style={%
		for tree={%
			folder,
			font=\ttfamily,
			grow'=0,
		},
		before typesetting nodes={%
			for tree={%
				edge label+/.option={pic me},
			},
		},
	},
	pic me set/.code n args=2{%
		\forestset{%
			#1/.style={%
				inner xsep=2\Size,
				pic me={pic {#2}},
			}
		}
	},
	pic me set={directory}{folder},
	pic me set={file}{file},
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%  Title page options
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% \date{\today}
\date{}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% option 1
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\title{Reproducible data science: best practices}
\subtitle{Lecture Series}
\author{\textbf{Paweł Kudela} }
% logo align to Institute 
\institute{Institute of Fluid Flow Machinery\\Polish Academy of Sciences \\ \vspace{-1.5cm}\flushright %\includegraphics[width=4cm]{//odroid-sensors/sensors/MISD_shared/logo/logo_eng_40mm.eps}}
\includegraphics[width=4cm]{/pkudela_odroid_sensors/MISD_shared/logo/logo_eng_40mm.eps}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\tikzexternalize % activate!
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\maketitle
%%%%%%%%%%%%%%%%%%%%
\note{Welcome to the lecture series in the frame of the doctoral school.
My name is Pawel Kudela. 
I am an associate professor at the Institute of Fluid Machinery, Polish Academy of Sciences.
Today I will talk about the importance of the reproducible data science. 
It is about organising your research workflow so that it is easier to reproduce what you have done in the past for yourself or others. 
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% SLIDES
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}[label=frame1]{Table of contents}
  \setbeamertemplate{section in toc}[sections numbered]
  %\tableofcontents[hideallsubsections]
  \tableofcontents
\end{frame}
%%%%%%%%%%%%%%%%%%%%
\note{My presentation is composed of two parts: the first part is more theoretical and second part is more practical.
In the theoretical part, I will talk about the idea of reproducible data science, components needed for reproducibility as well as best practices in project organisation and development. 
	
In the practical part, I will show you how to build skeleton of the project by using cookiecutter, write README files by using Markdown and track changes by using git version control system.}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Motivation and idea of reproducible data science}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}[label=frame2]{Motivation (1)}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
More than \Large\textbf{70\%} \normalsize of researchers have tried and failed to
reproduce another scientist’s experiments, and more
than \Large\textbf{50\%} \normalsize have \textbf{failed to reproduce} their own experiments. 
\vspace{10mm}

This leads to other academics and society losing trust in scientific results.

\begin{biblio}{}
	\biblioref{Monya Baker}{2016}{Reproducibility crisis?}{Nature, 533(26):353–66}
\end{biblio}
\end{frame}
%%%%%%%%%%%%%%%%%%%%
\note{There was a study published in Nature in 2016 where more than fifteen hundreds scientists were surveyed and more than 70\% said that they have tried and failed to reproduce another scientist experiments.
More than 50\% said they have tried and failed to reproduce their own experiments.
Those are some of the telling figures which may lead to loosing trust in scientist and their research findings by other academics and society in general.}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}[label=frame3]{Motivation (2)}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%	
\begin{columns}[T]
	\column{0.4\textwidth}
	\centering
	\begin{beamercolorbox}[wd=\textwidth,rounded=true,shadow=true]{block body}
		\huge Revising
	\end{beamercolorbox}
	\vspace{10mm}
	\begin{beamercolorbox}[wd=\textwidth,rounded=true,shadow=true]{block body}
		\huge Handing off
	\end{beamercolorbox}
	\column{0.4\textwidth}
	\begin{beamercolorbox}[wd=\textwidth,rounded=true,shadow=true]{block body}
		\huge Borrowing
	\end{beamercolorbox}
	\vspace{10mm}
	\begin{beamercolorbox}[wd=\textwidth,rounded=true,shadow=true]{block body}
		\huge Accountability
	\end{beamercolorbox}
\end{columns}
\end{frame}
%%%%%%%%%%%%%%%%%%%%
\note{In simple words: you can think about reproducible research as an idea: you want to play that song again. 
The reason is that data science projects are rarely one-and-done, they are rather incremental, they tend to cumulate knowledge from various fields and adapt to specific problem.
You may have to revise you research project in future; 
you may be doing another project and you want to borrow something from previous one; 
It is very likely that you have to hand it off to somebody else at future point and they have to understand what you did so far. 
And there is significant issue of accountability. You research workflow should show that your conclusions are justified. You have to show it for clients, funding agencies, regulators and most often reviewers.}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}[t,label=frame4]{Definitions (1)}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	\begin{alertblock}{Reproducible data science}
		\begin{itemize}
			\item Push-button reproducibility.
			\item Prepare a document which can reproduce research results a year or more later by pressing a single button.
			
			\biblioref{Jon F. Claerbout and Martin Karrenbach.}{1992}{Electronic documents give reproducible research a new meaning}{https://library.seg.org/doi/abs/10.1190/1.1822162}
			
		\end{itemize}
	
	\end{alertblock}

\only<2>{
	\vspace{5mm}
	\begin{tikzpicture}
		\draw[ultra thick,|-stealth,logoblue] (0,0)--(10,0);  % horizon
		\node[logoblue] at  (10,0.3) {o}; % target
		\draw[thick, -stealth, logoblue] (10,1)--(10,0.3); % target arrow
		\node[logoblue] at  (10.5,0.7) {target}; % target
		\node[draw,logoblue,below,align=left] at (0,-0.2) {nobody,\\ not even yourself,\\can recreate your analysis};
		\node[draw,logoblue,below,align=left] at (10,-0.2) {push-button\\reproducibility};
		\draw[ultra thick,|-|,orange] (6,0.3) -- node[above] {happy medium} (9,0.3); % happy medium
	\end{tikzpicture}
	}
\end{frame}
%%%%%%%%%%%%%%%%%%%%
\note{\scriptsize The most common definition of reproducibility (and replication) was first noted by Claerbout and Karrenbach in 1992 and has been used in computational science literature since then.
They set goals such as:\\
- Learn how to merge a publication with its underlying computational analysis.\\
- Teach researchers how to prepare a document which can reproduce research results a year or more later by pressing a single button.\\
- Learn how to leave finished work in a condition where coworkers can reproduce the calculation including the final illustration by pressing a button in the caption.\\
- Prepare copy of local software environment, so that students can take their work elsewhere, press a button and reproduce their work.\\
- Merge electronic documents written by multiple authors.\\
- Export electronic documents to numerous other sites.\\
In this article we can also read:
"Now that we have begun using CD-ROM publication, we can go much further. 
Every figure caption contains a pushbutton that jumps to the appropriate science directory (folder) and initiates a figure rebuild command and then displays the figure, possibly as a movie or interactive program."
This is still not a common place in scientific journals! We still are not there yet! 
Even there is more move towards reproducibility, open data science, data submission along publication, etc. we still does not have that push-button reproducibility. 
It is difficult to achieve that for a variety of reasons.

If we look at this graph as a kind of reproducibility horizon where on one end nobody, not even yourself can recreate any part of your analysis and at the other and you have push button reproducibility and published work, you want to target that ultimate goal of push button reproducibility but when you are in a zone close to that I would say it is happy medium.
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}[label=frame5]{Definitions (2)}
	%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	\begin{alertblock}{Reproducible data science}
		\begin{itemize}
			\item The main goal of enabling reproducibility is to guarantee that all results can be independently recreated and verified to build upon in future work.
			\item In the context of data science, reproducibility means that everything needed to recreate the model and its results such as data, tools, libraries, frameworks, programming languages and operating systems, have been captured, so with little effort the identical results are produced regardless of how much time has passed since the original project.
		\end{itemize}	
	\end{alertblock}
\end{frame}
%%%%%%%%%%%%%%%%%%%%
\note{To summarize the definition of reproducible research in modern world we can say that reproducibility means that recreation of models and its results such as data, tools and graphs can be done with little effort and it leads to identical results as obtained in the past.
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}[label=frame6]{Definitions (3)}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	\begin{alertblock}{Reproducible vs Replicable}
			We define reproducible research as work that can be independently recreated from the same data and the same code that the original team used. 
			Reproducible is distinct from replicable.
			\vspace{5mm}
			
			\textbf{Reproducible}: A result is reproducible when the \emph{same} analysis steps performed on the \alert{same dataset} consistently produces the \underline{same} answer.
			
			\textbf{Replicable}: A result is replicable when the \emph{same} analysis performed on \alert{different datasets} produces qualitatively \underline{similar} answers.
	\end{alertblock}
\end{frame}
%%%%%%%%%%%%%%%%%%%%
\note{We define reproducible research as work that can be independently recreated from the same data and the same code that the original team used.
To complement this definition, however, we should distinguish between reproducibility and replicability of research. 
In both cases we want to answer the same research questions, we want to get the same results but in the case of replicability we are performing the analysis on a different dataset.
For example, we want to replicate a signal processing method published few years ago which aims to de-noise audio recordings and compare it qualitatively to our own method by using our own signals such as our voice recordings.
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}[label=frame7]{Benefits of data science reproducibility}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	\begin{itemize}
		\item Research credibility
		\item Transparency and re-usability
		\item Time savings
		\item Facilitate collaboration and review process
		\item Avoid misinformation
	\end{itemize}
	
	
\end{frame}
%%%%%%%%%%%%%%%%%%%%
\note{What are the benefits of data science reproducibility?
\scriptsize Well, scientific results are strengthened if those results can be replicated and confirmed by several independent researchers.
	
When researchers employ transparency in their research - in other words, when they properly document and share the data and processes associated with their analyses - the broader research community is able to save valuable time when reproducing or building upon published results. 

Often, data or code from prior projects will be re-used by new researchers to verify old findings or develop new analyses.
	
It should be noted that “negative results” also have a value and can be published easily, helping avoid other researchers wasting time repeating analyses that will not return the expected results.
	
By designing reproducible workflows and sharing them with the different components of our research project, we can allow others to develop an in-depth understanding of our work. 
This encourages them to review our methods, test our code, propose useful changes and make thoughtful contributions to develop our project further. 
Reproducible workflows facilitate the peer review process tremendously by allowing reviewers access to the different parts of the projects that are necessary to validate the research outcomes.
	
By working reproducibly, we can develop validated research work, avoid misinformation that can limit replicability of our work and publish accurate research outputs.
This aspect does not only support the validity of the \textbf{current} work, but any \textbf{future} studies that are based on reproducible research.
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}[label=frame8]{What is needed?}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	\begin{alertblock}{Make:}	
		\begin{itemize}
			\item raw data
			\item code \& documentation to reproduce analysis
			\item specifications of your computational environment
		\end{itemize}
		\textbf{available and accessible}
	\end{alertblock}
	
	\emph{"There is no one-size-fits-all solution for computational reproducibility."}
	\begin{biblio}{}
		\biblioref{Jeffrey M. Perkel}{2018}{A toolkit for data transparency takes shape}{Nature, 560, 513-515}
	\end{biblio}
\end{frame}
%%%%%%%%%%%%%%%%%%%%
\note{\scriptsize An important outcome of our research is the publication but publication does not necessarily reflect the amount of hard work we put in it.
And this work is actually where science is happening not the published article itself which we are getting credit for.
The thing is that if anybody want to reproduce your hard work or you want to reproduce what is in the published paper which you are interested in, it is not easy task because the paper often lacks important components.
So, what is needed to make data science reproducible?
We have to make raw data available along with the paper by for example linking dataset published in an open repository, we have to share the code and documentation of the steps which are needed to reproduce the results and make specification of the computational environment available and accessible. Without these three components it is impossible to reproduce someone's work.

There is no one-size-fits-all solution for computational reproducibility.
The research workflow might differ substantially if you work in the field of bioinformatics, mechanical engineering, chemistry or some specific specialization.
But there are common elements in each case.

My advise would be that if you want to make your research work reproducible you have to set you mindset right away when starting the project not at the paper submission stage.

I hope that hints which I will give at the next slides will help you to do that.
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Project skeleton}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}[t]{Organize your project (1)}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
Project skeleton (template) and strategy is needed to store files!
\vspace{3mm}

\begin{beamercolorbox}[wd=0.8\textwidth,rounded=true,shadow=true]{block body}
	\emph{A place for everything, everything in its place}\\
	\flushright
	Benjamin Franklin
\end{beamercolorbox}
\vspace{3mm}

\begin{beamercolorbox}[wd=0.8\textwidth,rounded=true,shadow=true]{block body}
	\emph{File organization and naming are powerful weapons against chaos}\\
	\flushright
	Jenny Bryan
\end{beamercolorbox}	
\begin{columns}[T]
	\hspace{0.05\textwidth}
	\column{0.2\textwidth}
	\centering
	\begin{beamercolorbox}[wd=0.8\textwidth,rounded=true,shadow=true]{frametitle}
		\centering Raw data
	\end{beamercolorbox}
	\begin{beamercolorbox}[wd=0.8\textwidth,rounded=true,shadow=true]{frametitle}
		\centering Processed data
	\end{beamercolorbox}
	\begin{beamercolorbox}[wd=0.8\textwidth,rounded=true,shadow=true]{frametitle}
		\centering Numerical results
	\end{beamercolorbox}
	\column{0.1\textwidth}
	\centering
	\tikz\node at (0,0) [fill=black,shape=single arrow,text width=0.8\textwidth,text height=2ex] {};
	\column{0.2\textwidth}
	\centering
	\begin{beamercolorbox}[wd=0.8\textwidth,rounded=true,shadow=true]{frametitle}
		\centering figures
	\end{beamercolorbox}
	\begin{beamercolorbox}[wd=0.8\textwidth,rounded=true,shadow=true]{frametitle}
		\centering tables
	\end{beamercolorbox}
	\column{0.1\textwidth}
	\centering
	\tikz\node at (0,0) [fill=black,shape=single arrow,text width=0.8\textwidth,text height=2ex] {};
	\column{0.2\textwidth}
	\centering
	\begin{beamercolorbox}[wd=0.8\textwidth,rounded=true,shadow=true]{frametitle}
		\centering report
	\end{beamercolorbox}
	\begin{beamercolorbox}[wd=0.8\textwidth,rounded=true,shadow=true]{frametitle}
		\centering manuscript
	\end{beamercolorbox}
	\begin{beamercolorbox}[wd=0.8\textwidth,rounded=true,shadow=true]{frametitle}
		\centering presentation
	\end{beamercolorbox}
\end{columns}
\end{frame}
%%%%%%%%%%%%%%%%%%%%
\note{Let's start with organizing your project by creating a project skeleton or template.
What I mean by the project skeleton, is a folder tree structure which help us sort and navigate through data and files which we are creating during project development.
And there is always a lot of them!
"File organization and naming are powerful weapons against chaos" said Jenny Bryan.
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}[t]{Organize your project (2)}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\vspace{-5mm}
\begin{columns}[T]
	\column{0.5\textwidth}
	\centering
	\begin{forest}
		pic dir tree,
		where level=0{}{% folder icons by default; override using file for file icons
			directory,
		},
		[simple\_project
			[raw\_data
			]
			[processed\_data
			]
			[manuscript
				[mssp\_paper.tex, file
				]
			]
		]
	\end{forest}
	\column{0.5\textwidth}
	\centering
	\begin{forest}
		pic dir tree,
		where level=0{}{% folder icons by default; override using file for file icons
			directory,
		},
		[more\_complex\_project
		[data
			[raw\_data
			]
			[processed\_data
			]
		]
		[src
			[data\_processing
			]
			[visualization
			]
			[models
			]
		]
		[reports
			[figures
			]
			[journal\_papers
			]
		]
		]
	\end{forest}
\end{columns}	
\end{frame}
%%%%%%%%%%%%%%%%%%%%
\note{Let's start with organizing your project by creating a project skeleton or template.
What I mean by the project skeleton, is a folder tree structure which help us sort and navigate through data and files which we are creating during project development.
"File organization and naming are powerful weapons against chaos" said Jenny Bryan.
Project skeleton (template) and strategy is needed to store files!
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}[t]{Organize your project (3)}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
Hints:
\begin{itemize}
	\item all files in common directory (named by project slug - abbreviation) 
	\item separate raw data from processed data
	\item give team members read-only permissions to raw data
	\item separate code from data
	\item file names: meaningful, sortable, consistent (controlled vocabulary)
	\item dates like 2023-05-10
	\item remove clutter of unneeded old stuff by moving files to folder 
	\begin{tikzpicture}
		\pic{folder};
	\end{tikzpicture}
	\texttt{unused}
\end{itemize}	
\begin{columns}[T]
	\hspace{5mm}
	\column{0.5\textwidth}
	\textbf{dos}\\
	\texttt{mssp\_paper.tex}\\
	\texttt{mssp-paper-draft-2023-05-10.tex}\\
	\texttt{mssp-paper-final-2023-05-15.tex}\\
	\column{0.5\textwidth}
	\textbf{don'ts}\\
	\sout{\texttt{MSSP paper 1.tex}}\\
	\sout{\texttt{MSSP\_paper\_v5\_final\_rev\_FINAL\_FOR\_REAL.tex}}
	\alert{Dash '-' does not work in MATLAB!}
\end{columns}

\end{frame}
%%%%%%%%%%%%%%%%%%%%
\note{make a file’s name and location VERY
INFORMATIVE about what it is, why it exists,
how it relates to other things
the more things are self-explanatory, the
better
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}[t]{Organize your project (4) - controlled vocabulary}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\end{frame}
%%%%%%%%%%%%%%%%%%%%
\note{
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}[t]{Organize your project (5) - my strategy}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\vspace{-5mm}
\begin{columns}[T]
	\column{0.4\textwidth}
	\centering
	\only<1>
	{
	\begin{forest}
		pic dir tree,
		where level=0{}{% folder icons by default; override using file for file icons
			directory,
		},
		[my\_project
		[data
		[raw\_data
			[specimen\_1
				[\textcolor{orange}{50kHz\_pzt}.mat, file
				]
			]
		]
		[processed\_data
			[specimen\_1
			]
		]
		]
		[src
			[data\_processing
				[\alert{rms}.m, file
				]
			]
		]
		]
	\end{forest}
	}
	\only<2->
	{
		\begin{forest}
			pic dir tree,
			where level=0{}{% folder icons by default; override using file for file icons
				directory,
			},
			[my\_project
			[data
			[raw\_data
				[specimen\_1
					[\textcolor{orange}{50kHz\_pzt}.mat, file
					]
				]
			]
			[processed\_data
				[specimen\_1
					[\alert{rms}
						[\textcolor{orange}{50kHz\_pzt\_}\alert{rms}.mat, file
						]
					]
				]
			]
			]
			[src
				[data\_processing
					[\alert{rms}.m, file
					]
				]
			]
			]
		\end{forest}
	}
	\column{0.6\textwidth}
	\centering
	\only<3>
	{
	\begin{forest}
		pic dir tree,
		where level=0{}{% folder icons by default; override using file for file icons
			directory,
		},
		[my\_project
		[src
			[data\_processing
			]
			[visualization
				[\textcolor{logoblue}{plot\_rms}.m, file
				]
			]
		]
		[reports
			[figures
			]
			[journal\_papers
			]
		]
		]
	\end{forest}
	}
	\only<4->
	{
	\begin{forest}
		pic dir tree,
		where level=0{}{% folder icons by default; override using file for file icons
			directory,
		},
		[my\_project
		[src
			[data\_processing
			]
			[visualization
				[\textcolor{logoblue}{plot\_rms}.m, file
				]
			]
		]
		[reports
			[figures
				[\textcolor{logoblue}{plot\_rms}
					[\textcolor{logoblue}{plot\_rms}\_specimen\_1\_\textcolor{orange}{50kHz\_pzt}\_\alert{rms}.png,file
					]
				]
			]
			[journal\_papers
			]
		]
		]
	\end{forest}
	}
\end{columns}	
\end{frame}
%%%%%%%%%%%%%%%%%%%%
\note{\scriptsize It is easy to get lost with increasing number of scripts, results and figures so I will share with you what is my strategy which works for me pretty well.
A part of my project directory tree structure looks like this.
Let's say that I want to process the file in orange, which is related to raw measurement data on specimen 1; in particular I want to compute root mean square value of that data.
To do this I write a script in data processing folder, the script name is rms dot m,
which is MATLAB format but it can be written in any other language like python for example.
The key here is that when the script is run, it extracts its own name.
Based on that name subfolder is created in appropriate place of processed\_data and this subfolder name is the same as the name of the script. 
Moreover, the name of resulting processed data is composed of two parts: inherited subfolder name 'rms' and original raw data file name '50kHz\_pzt' joined by underscore.
In this way everything is logically placed and it is easy to identify which script generated which result.
I use the same approach for vizualisation of results.
I create a script in 'visualization' folder named 'plot underscore rms dot m' which automatically creates appropriate subfolder in the 'figures' folder.
Similarly, the name of resulting png image inherits subfolder name, additionally specimen name and data name.
Off course you can develop you own strategy, but choose one and be consistent.
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Organize your project (5)}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
Project skeleton (template) - \alert{Coockiecutter} by Audrey Roy Greenfeld\\
Documentation: \url{https://cookiecutter.readthedocs.io/en/stable/README.html}\\
GitHub: \url{https://github.com/cookiecutter/cookiecutter}\\
\begin{itemize}
	\item Cookiecutter takes a template provided as a directory structure with template-files.
	\item It reads a settings file and prompts the user interactively whether to change the settings.
	\item Then it takes both and generates an output directory structure from it.
\end{itemize}
\texttt{README} file with the project description, \texttt{LICENSE} file and list of authors in \texttt{AUTHORS} file can be incorporated in the template.\\
Additionally, project skeleton generated by cookiecutter is version control ready. 	
\end{frame}
%%%%%%%%%%%%%%%%%%%%
\note{A useful, small tool which I came across and I am using myself is coockie-cutter by Mr Greenfeld.
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Write READMEs}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Write READMEs liberally}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
Markdown	
\end{frame}
%%%%%%%%%%%%%%%%%%%%
\note{}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Machine readable data}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Keep data tidy \& machine readable}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
Hints for spreadsheets, data tables:
\begin{itemize}
	\item rows=observations, columns=variables
	\item one header row; avoid white spaces
	\item no calculations in raw data files
	\item save as CSV
	\item don't use font color or highlighting as data
\end{itemize}	
\end{frame}
%%%%%%%%%%%%%%%%%%%%
\note{}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Code development}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Comment your code}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	
\end{frame}
%%%%%%%%%%%%%%%%%%%%
\note{}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Use literate programming}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\alert{Literate programming} is a programming paradigm introduced in 1984 by Donald Knuth in which a computer program is given as an explanation of how it works in a natural language, such as English, interspersed (embedded) with snippets of macros and traditional source code, from which compilable source code can be generated.

\begin{biblio}{}
	\biblioref{Donald E. Knuth}{1984}{Literate Programming}{The Computer Journal. British Computer Society. 27(2): 97--111, doi:10.1093/comjnl/27.2.97}
\end{biblio}

Examples: Literate, Jypyter Notebook, Maple Worksheets, Wolfram Notebooks (Mathematica), R Markdown, MATLAB Live Editor.	
\end{frame}
%%%%%%%%%%%%%%%%%%%%
\note{Literate programming is a style of programming invented by Donald Knuth, where the main idea is that a program's source code is made primarily to be read and understood by other people, and secondarily to be executed by the computer.
	
This frees the programmer from the structure of a program imposed by the computer and means that the programmer can develop programs in the order of the flow of their thoughts.
A Literate program generally consists of explanation of the code in a natural language such as English, interspersed with snippets of code to be executed. 
This means that Literate programs are very easy to understand and share, as all the code is well explained.}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Version control}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Use version control (1)}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{alertblock}{Version control system}
	Software tools that helps in recording changes made to files by keeping a track of modifications done in the code. 
\end{alertblock}

Examples: \alert{Git}, Helic core, Microsoft TFS, Perforce, Subversion, Mercurial...	

Internet hosting services for software development and version control using Git:\\
GitHub, GitLab and BitBucket.
\vspace{10mm}
\begin{columns}[T]
	\column{0.5\textwidth}
	\centering
	\includegraphics[scale=0.1]{Git-Logo-1788C.png}
	\column{0.5\textwidth}
	\centering
	\includegraphics{github-mark.png}
	\includegraphics[scale=0.1]{GitHub_Logo.png}
\end{columns}
\end{frame}
%%%%%%%%%%%%%%%%%%%%
\note{What is version control system? 
Basically Version control system keeps track of changes made on a particular project and take a snapshot of every modification done in the code.
The most popular examples of version control systems are: Git, Helic core, Microsoft TFS, Perforce, Subversion and Mercurial among others.

Version control system should be distinguished from internet hosting services which offers code repositories along with version control, bug tracking, continuous integration, etc. for every project. 

Examples of such repositories are: GitHub, GitLab and BitBucket.
GitHub and GitLab utilize git as underlying version control system.
BitBucket offered both Git and Mercurial as a version control system but the Bitbucket Mercurial Support ended in 2020.

Due to popularity of Git version control system we will learn basics of it in the practical part of this lecture.

Other tools helpful for software development are CloudBees, CircleCI and Jenkins.
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Use version control (2)}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
Purpose of Version Control: 
\begin{itemize}
	\item Collaboration
	\item Integration of work
	\item Remote access / multiple computer use
	\item Roll back (undo) feature
\end{itemize}	
\end{frame}
%%%%%%%%%%%%%%%%%%%%
\note{The purpose of version control is collaboration: 
Multiple people can work simultaneously on a single project. 
Everyone works on and edits their own copy of the files and it is up to them when they wish to share the changes made by them with the rest of the team. 

Following this up, version control system integrates the work that is done simultaneously by different members of the team. 
In some rare cases, when conflicting edits are made by two people to the same line of a file, then human assistance is requested by the version control system in deciding what should be done - which version (or line of the code) should we keep and which discard.

It also enables one person to use multiple computers to work on a project, so it is valuable even if you are working by yourself.

One of the most important purpose of version control system is roll back feature. 
Version control provides access to the historical versions of a project. 
This is insurance against computer crashes or data loss. 
If any mistake is made, you can easily roll back to a previous version. 
It is also possible to undo specific edits without losing the work done in the meanwhile. 
It can be easily known when, why, and by whom any part of a file was edited.}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Workflow automation}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Automate your process}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
Make, make all scripts	
"Good workflow" means \textbf{not having to remember} things.
Kjell Wooding
\end{frame}
%%%%%%%%%%%%%%%%%%%%
\note{Run scripts in particular order}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Computational environment}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{Share your computing environment}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
Hint: One environment per repo!	
\url{https://carpentries-incubator.github.io/introduction-to-conda-for-data-scientists/04-sharing-environments/index.html}
\end{frame}
%%%%%%%%%%%%%%%%%%%%
\note{Sharing computing environment is especially important when we work with Machine Learning.}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{frame}{References}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	\begin{biblio}{Recommended literature}
		\biblioref{Jon F. Claerbout and Martin Karrenbach.}{1992}{Electronic documents give reproducible research a new meaning}{https://library.seg.org/doi/abs/10.1190/1.1822162}
		\biblioref{Jeffrey M. Perkel}{2018}{A toolkit for data transparency takes shape}{Nature, 560, 513-515}
		\biblioref{Karl Broman, Kara Woo}{2018}{Data organization in spreadsheets}{The American Statistician, 72(1), 2-10, doi.org/10.1080/00031305.2017.1375989}
		\biblioref{Karl Broman}{2018}{Minimal Make}{kbroman.org/minimal{\_}make}
		\biblioref{Carl Boetiger}{2015}{An introduction to Docker for reproducible research}{ACM SIGOPS Operating System Review, 49(1), 71-79}
		\biblioref{Ben Marwick, Carl Boettiger, Lincoln Mullen}{2018}{Packaging data analytical work reproducibly using R (and friends)}{The American Statistician, 72, 80-88.}
	\end{biblio}
\end{frame}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Practical part (Cookiecutter, Markdown, Git, Github)}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
{\setbeamercolor{palette primary}{fg=black, bg=white}
	\begin{frame}[standout]
		Thank you for your attention!\\ \vspace{12pt}
		Questions?\\ \vspace{12pt}
		\url{pk@imp.gda.pl}
	\end{frame}
}
\note{Thank you for your attention!
	See you next time!}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% END OF SLIDES
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\end{document}

